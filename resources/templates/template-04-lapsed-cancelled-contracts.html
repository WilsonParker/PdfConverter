<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Template 04. 실효/해지 계약 현황</title>
    <!--<link rel="stylesheet" href="/resources/styles/print.css" />-->
    {{ styleComponents | safe}}
    <style>
      /* 상단 요약 영역 */
      .header-summary {
        display: flex;
        position: absolute;
        align-items: center;
        background: var(--color-primary);
        color: var(--color-white);
        padding: 12px 30px;
        width: calc(100% - 60px);
        left: 0;
        top: 0;
      }

      .header-summary .title {
        font-size: 20px;
        font-weight: 600;
        color: var(--color-secondary);
      }
      .header-summary .title span {
        font-size: 14px;
      }
      .header-summary .summary-grid {
        position: absolute;
        background: var(--color-primary);
        width: 35%;
        height: 112px;
        top: 0;
        right: 0;
        border-radius: 0 0 0 32px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 24px 30px;
      }

      .summary-item {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 700;
      }

      .summary-item .label {
        font-size: 12px;
      }
      .summary-item .value {
        font-size: 16px;
      }
      .summary-item .value span {
        font-size: 12px;
      }

      .contract-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13px;
        table-layout: fixed;
      }

      .contract-table thead {
        background: var(--color-primary-op8);
      }
      .contract-table thead th {
        color: var(--color-white);
        padding: 12px 8px;
        font-weight: 600;
        border: none;
      }

      .contract-table tbody td {
        padding: 14px 8px;
        text-align: center;
        height: 20px; /* 높이 고정 */
      }

      /* Zebra Stripe 효과: 스크린샷과 동일하게 짝수행 배경색 */
      .contract-table tbody tr:nth-child(even) td {
        background-color: var(--color-primary-op1);
      }

      /* 특정 컬럼 스타일링 */
      .col-product {
        text-align: left !important;
        padding-left: 15px !important;
      }
      .premium-amount {
        color: #ff6200;
      }
      .col-dates {
        font-size: 12px;
        letter-spacing: -0.5px;
      }

      /* 빈 데이터 행 스타일 */
      .row-empty td {
        color: transparent;
      }
    </style>
  </head>
  <body>
    <div class="page" data-id="report-page">
      <header class="header-summary">
        <div class="title">
          {{ data.user_name }}&nbsp;<span>님</span> &nbsp;&nbsp;Insurance Portfolio
        </div>
        <div class="summary-grid">
          <div class="summary-item">
            <div class="label">월 보험료 합계</div>
            <div class="value">{{ data.monthly_insurance_premium }}&nbsp;<span>원</span></div>
          </div>
          <div class="summary-item">
            <div class="label">계약 건수</div>
            <div class="value">{{ data.number_of_insurance_contracts }}&nbsp;<span>건</span></div>
          </div>
        </div>
      </header>

      <section style="margin-top: 40px">
        <h2 class="section-title">실효/해지 계약 현황</h2>
        <table class="contract-table">
          <thead>
            <tr>
              <th style="width: 5%">#</th>
              <th style="width: 12%">회사명</th>
              <th style="width: 30%">상품명</th>
              <th style="width: 20%">계약일/만기일</th>
              <th style="width: 10%">납입<br />주기</th>
              <th style="width: 10%">납입<br />기간</th>
              <th style="width: 13%">월 보험료</th>
            </tr>
          </thead>
          <tbody data-id="contract-list">
            {% for row_data in data.tables %}
            <tr>
              <td>{{ row_data.index }}</td>
              <td>{{ row_data.company_name }}</td>
              <td class="col-product">{{ row_data.product_name }}</td>
              <td class="col-dates">
                {{ row_data.contract_start_date }} ~ {{ row_data.contract_end_date }}
              </td>
              <td>{{ row_data.payment_cycle }}</td>
              <td>{{ row_data.payment_period }}</td>
              <td class="">
                <span class="premium-amount">
                  {{ row_data.monthly_premium | replace('원','<span class="unit">원</span>') | safe
                  }}
                </span>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </section>
    </div>
  </body>
</html>
